@{
    ViewBag.Title = "Крипто Портфель";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
 <!--Статус доступности-->
<div class="mb-2 text-muted"">
    Binance: <span id="binance-status">-</span><br />
    Время: <span id="binance-time">-</span>
</div>

@section Scripts {
    <script>
        async function binanceStatus() {
            const status = document.getElementById("binance-status");
            const time = document.getElementById("binance-time");
            let latencyText = "-"; // для скорости отклика
            try {
                const start = performance.now(); // засекаем время
                const res = await fetch('@Url.Action("GetBinanceStatus", "Home")', { cache: "no-store" }); // чекаем бинанс на дотсупность
                if (!res.ok) throw new Error("Bad response");
                const data = await res.json();
                const latency = Math.round(performance.now() - start); // считаем сколько прошло до получения ответа
                if (data.isOnline) {
                    status.innerHTML = '<span>есть доступ</span>'; // добавить цвета
                    latencyText = `${latency} мс`;
                } else {
                    status.innerHTML = '<span>нет доступа</span>';
                }
            } catch (err) {
                status.innerHTML = '<span>ошибка</span>';
            }
            time.innerText = latencyText;
        }
        setInterval(binanceStatus, 1000);
    </script>

}

<!--<div class="text-center">
    <h1 class="display-4">Welcome</h1>
    <p>Learn about <a href="https://learn.microsoft.com/aspnet/core">building Web apps with ASP.NET Core</a>.</p>
</div>-->
